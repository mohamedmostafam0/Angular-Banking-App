<p-card header="Accounts" styleClass="accounts-card">
  <p-table
    #dt
    [value]="accounts"
    [paginator]="true"
    [globalFilterFields]="['number', 'type', 'balance', 'status']"
    [tableStyle]="{ 'min-width': '75rem' }"
    [rows]="5"
    [rowsPerPageOptions]="[5, 10, 20]"
    scrollable="true"
    scrollHeight="400px"
  >
    <ng-template pTemplate="caption">
      <div
        class="table-header"
        style="
          display: flex;
          justify-content: space-between;
          align-items: right;
        "
      >
        <p-button
          label="Clear"
          styleClass="p-button-outlined"
          icon="pi pi-filter-slash"
          (onClick)="clear(dt)"
        ></p-button>
      </div>
    </ng-template>
    <ng-template pTemplate="header">
      <tr>
        <th pSortableColumn="number" style="width: 20%">
          <div class="flex justify-content-between align-items-center">
            Account No.
            <p-sortIcon field="number"></p-sortIcon>
            <p-columnFilter
              type="text"
              field="number"
              display="menu"
            ></p-columnFilter>
          </div>
        </th>
        <th pSortableColumn="type" style="width: 20%">
          <div class="flex justify-content-between align-items-center">
            Type
            <p-sortIcon field="type"></p-sortIcon>
            <p-columnFilter field="type" matchMode="equals" [showMenu]="false">
              <ng-template pTemplate="filter" let-value let-filter="filter">
                <p-dropdown
                  [options]="typeOptions"
                  [ngModel]="value"
                  (onChange)="filter($event.value)"
                  placeholder="Any"
                  [showClear]="true"
                >
                </p-dropdown>
              </ng-template>
            </p-columnFilter>
          </div>
        </th>
        <th pSortableColumn="balance" style="width: 20%">
          <div class="flex justify-content-between align-items-center">
            Balance
            <p-sortIcon field="balance"></p-sortIcon>
            <p-columnFilter
              type="numeric"
              field="balance"
              display="menu"
            ></p-columnFilter>
          </div>
        </th>
        <th pSortableColumn="status" style="width: 20%">
          <div class="flex justify-content-between align-items-center">
            Status
            <p-sortIcon field="status"></p-sortIcon>
            <p-columnFilter
              field="status"
              matchMode="equals"
              [showMenu]="false"
            >
              <ng-template pTemplate="filter" let-value let-filter="filter">
                <p-dropdown
                  [options]="statusOptions"
                  [ngModel]="value"
                  (onChange)="filter($event.value)"
                  placeholder="Any"
                  [showClear]="true"
                >
                </p-dropdown>
              </ng-template>
            </p-columnFilter>
          </div>
        </th>
        <th style="width: 20%">View account transactions</th>
      </tr>
    </ng-template>
    <ng-template pTemplate="body" let-account>
      <tr>
        <td>{{ account.number }}</td>
        <td>{{ account.type }}</td>
        <td>{{ account.balance | currency : "USD" }}</td>
        <td>
          <p-tag
            [value]="account.status"
            [severity]="account.status === 'Active' ? 'success' : 'danger'"
          ></p-tag>
        </td>
        <td>
          <p-button
            pRipple
            icon="pi pi-eye"
            [routerLink]="['/transactions']"
            [queryParams]="{ account: account.number }"
          ></p-button>
        </td>
      </tr>
    </ng-template>
  </p-table>
</p-card>
