<div class="settings-page">
  <div class="header">
    <h1>Profile & Security</h1>
    <p>Manage your profile, password, and security settings.</p>
  </div>

  <p-splitter [panelSizes]="[20, 80]">
    <ng-template pTemplate>
      <div
        class="flex flex-column align-items-center justify-content-center h-full"
      >
        <i class="pi pi-user" style="font-size: 4rem"></i>
        <h2 class="mt-3">{{ username }}</h2>
      </div>
    </ng-template>
    <ng-template pTemplate>
      <p-accordion [multiple]="true" value="0">
        <p-accordion-panel value="0">
          <p-accordion-header>Edit Profile</p-accordion-header>
          <p-accordion-content>
            <p-card>
              <div class="p-fluid">
                <div class="field">
                  <label for="name">Name</label>
                  <input
                    id="name"
                    type="text"
                    pInputText
                    [(ngModel)]="profile.name"
                  />
                </div>
                <div class="field">
                  <label for="email">Email</label>
                  <input
                    id="email"
                    type="email"
                    pInputText
                    [(ngModel)]="profile.email"
                  />
                </div>
                <div class="field">
                  <label for="phone">Phone</label>
                  <input
                    id="phone"
                    type="text"
                    pInputText
                    [(ngModel)]="profile.phone"
                  />
                </div>
              </div>
              <p-footer>
                <button
                  pButton
                  type="button"
                  label="Save Profile"
                  icon="pi pi-check"
                ></button>
              </p-footer>
            </p-card>
          </p-accordion-content>
        </p-accordion-panel>

        <p-accordion-panel value="1">
          <p-accordion-header>Change Password</p-accordion-header>
          <p-accordion-content>
            <p-card>
              <div class="p-fluid">
                <div class="field">
                  <label for="currentPassword">Current Password</label>
                  <p-password
                    id="currentPassword"
                    [(ngModel)]="password.current"
                    [feedback]="false"
                  ></p-password>
                </div>
                <div class="field">
                  <label for="newPassword">New Password</label>
                  <p-password
                    id="newPassword"
                    [(ngModel)]="password.new"
                    [feedback]="true"
                  ></p-password>
                </div>
                <div class="field">
                  <label for="confirmPassword">Confirm New Password</label>
                  <p-password
                    id="confirmPassword"
                    [(ngModel)]="password.confirm"
                    [feedback]="false"
                  ></p-password>
                </div>
              </div>
              <p-footer>
                <button
                  pButton
                  type="button"
                  label="Change Password"
                  icon="pi pi-key"
                  disabled="{{ password.new !== password.confirm }}"
                ></button>
              </p-footer>
            </p-card>
          </p-accordion-content>
        </p-accordion-panel>

        <p-accordion-panel value="2">
          <p-accordion-header>Work Info</p-accordion-header>
          <p-accordion-content>
            <p-card>
              <div class="p-fluid">
                <div class="field">
                  <label for="employer">Employer</label>
                  <input id="employer" type="text" pInputText />
                </div>
                <div class="field">
                  <label for="jobTitle">Job Title</label>
                  <input id="jobTitle" type="text" pInputText />
                </div>
              </div>
              <p-footer>
                <button
                  pButton
                  type="button"
                  label="Save Work Info"
                  icon="pi pi-check"
                ></button>
              </p-footer>
            </p-card>
          </p-accordion-content>
        </p-accordion-panel>

        <p-accordion-panel value="3">
          <p-accordion-header>Two-Factor Authentication</p-accordion-header>
          <p-accordion-content>
            <p-card>
              <div class="field-checkbox">
                <p-inputSwitch [(ngModel)]="twoFactor.sms"></p-inputSwitch>
                <label>Enable SMS Authentication</label>
              </div>
              <div class="field-checkbox">
                <p-inputSwitch [(ngModel)]="twoFactor.email"></p-inputSwitch>
                <label>Enable Email Authentication</label>
              </div>
            </p-card>
          </p-accordion-content>
        </p-accordion-panel>

        <p-accordion-panel value="4">
          <p-accordion-header>Audit Log</p-accordion-header>
          <p-accordion-content>
            <p-table [value]="auditLog" [paginator]="true" [rows]="5">
              <ng-template pTemplate="header">
                <tr>
                  <th>Action</th>
                  <th>Date</th>
                  <th>IP Address</th>
                </tr>
              </ng-template>
              <ng-template pTemplate="body" let-log>
                <tr>
                  <td>{{ log.action }}</td>
                  <td>{{ log.date | date : "medium" }}</td>
                  <td>{{ log.ip }}</td>
                </tr>
              </ng-template>
            </p-table>
          </p-accordion-content>
        </p-accordion-panel>
      </p-accordion>
    </ng-template>
  </p-splitter>
</div>
