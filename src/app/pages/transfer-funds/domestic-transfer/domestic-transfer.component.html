<p-toast></p-toast>
<div class="transfer-page">
  <div class="header">
    <h1>Domestic Transfer</h1>
    <p>Transfer funds to another account in the same country.</p>
  </div>

  <p-card>
    <p-splitter styleClass="mb-5" [panelSizes]="[35, 65]">
      <ng-template pTemplate="form">
        <div class="flex align-items-center h-full">
          <div class="instructions">
            <h2>Instructions for Domestic Transfer</h2>
            <h4>Follow these steps to complete a domestic fund transfer</h4>
            <ul>
              <li>
                <strong>Select From Account:</strong> Choose the account from
                which you want to transfer funds.
              </li>
              <li>
                <strong>Enter To Account:</strong> Provide the recipient's
                account number within the same country.
              </li>
              <li>
                <strong>Enter Amount and Currency:</strong> Specify the amount
                you wish to transfer and select the currency.
              </li>
              <li>
                <strong>Review and Confirm:</strong> Click "Review Transfer" to
                verify details, then confirm.
              </li>
            </ul>
          </div>
        </div>
      </ng-template>
      <ng-template pTemplate>
        <div class="flex align-items-center h-full" style="width: 100%">
          <div class="col-12 flex">
            <form
              class="transfer-form"
              [formGroup]="transferForm"
              (ngSubmit)="initiateTransfer()"
            >
              <div class="field mb-3">
                <label>Select a Beneficiary</label>
                <div class="beneficiary-chips">
                  <p-chip
                    *ngFor="let beneficiary of beneficiaries"
                    [label]="beneficiary.name"
                    styleClass="p-chip-clickable"
                    (click)="selectBeneficiary(beneficiary)"
                    [pTooltip]="'Account: ' + beneficiary.accountNumber"
                    tooltipPosition="top"
                  >
                  </p-chip>
                  <span
                    *ngIf="beneficiaries.length === 0"
                    class="no-beneficiaries-msg"
                    >No domestic beneficiaries found.</span
                  >
                </div>
              </div>

              <div class="p-fluid">
                <div class="field mb-3">
                  <div class="field mb-3">
                    <label for="fromAccount">From Account</label>
                    <p-dropdown
                      inputId="fromAccount"
                      [options]="accounts"
                      formControlName="fromAccount"
                      placeholder="Select an account"
                      optionLabel="number"
                    >
                    </p-dropdown>
                  </div>
                </div>

                <div class="field mb-3">
                  <label for="toAccount" class="col-12 md:col-4"
                    >To Account</label
                  >
                  <div class="col-12 md:col-8">
                    <input
                      pInputText
                      id="toAccount"
                      formControlName="toAccount"
                      placeholder="Enter account number or select a beneficiary"
                      class="'p-inputtext p-component p-element input-login text-left ng-untouched ng-pristine ng-invalid"
                    />
                  </div>
                </div>

                <div class="field mb-3">
                  <label for="amount" class="col-12 md:col-4">Amount</label>
                  <div class="col-12 md:col-8">
                    <p-inputNumber
                      inputId="amount"
                      formControlName="amount"
                      mode="currency"
                      [currency]="transferForm.get('currency')?.value || 'USD'"
                      locale="en-US"
                    >
                    </p-inputNumber>
                  </div>
                </div>
                <div class="field mb-3">
                  <label for="currency" class="col-12 md:col-4">Currency</label>
                  <div class="col-12 md:col-8">
                    <p-dropdown
                      inputId="currency"
                      [options]="supportedCurrencies"
                      formControlName="currency"
                      placeholder="Select a currency"
                    >
                    </p-dropdown>
                  </div>
                </div>
              </div>

              <div class="flex mt-3">
                <p-button
                  label="Review Transfer"
                  type="submit"
                  [disabled]="transferForm.invalid"
                >
                </p-button>
              </div>
            </form>
          </div>
        </div>
      </ng-template>
    </p-splitter>
  </p-card>
</div>
